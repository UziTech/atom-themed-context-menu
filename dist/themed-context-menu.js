var p=Object.create,a=Object.defineProperty,h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,M=Object.getOwnPropertyNames,x=Object.getOwnPropertyDescriptor;var d=o=>a(o,"__esModule",{value:!0});var C=(o,e)=>{for(var t in e)a(o,t,{get:e[t],enumerable:!0})},E=(o,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of M(e))!v.call(o,n)&&n!=="default"&&a(o,n,{get:()=>e[n],enumerable:!(t=x(e,n))||t.enumerable});return o},f=o=>o&&o.__esModule?o:E(d(a(o!=null?p(h(o)):{},"default",{value:o,enumerable:!0})),o);d(exports);C(exports,{activate:()=>y,deactivate:()=>k});var u=f(require("events")),i=class{constructor(e,t){this.selected=!1;this.element=e,this.parent=t,this.emitter=new u.default,this.element.addEventListener("click",n=>this.onMouseClick(n))}static createMenuItem(e,t){if(e.type==="separator")return new i(document.createElement("hr"),t);let n=document.createElement("div");n.classList.add("menu-item");let l=new i(n,t),s=document.createElement("span");s.classList.add("menu-item-name"),s.innerHTML=e.label?e.label:"";let r=document.createElement("span");if(r.classList.add("menu-item-key"),n.appendChild(s),n.appendChild(r),e.command!==void 0){l.command=e.command;let c=atom.keymaps.findKeyBindings({command:e.command});c.length>0&&(r.innerHTML=c[c.length-1].keystrokes)}return l}getElement(){return this.element}onMouseClick(e){this.execCommand(),this.parent.deleteContextMenu()}onSubItemMouseEnter(e,t){}async execCommand(){var t;if(this.command===void 0)return;let e=((t=atom.workspace.getActiveTextEditor())==null?void 0:t.getElement())||atom.workspace.getActivePane().getElement();await atom.commands.dispatch(e,this.command,this.commandDetail)}};var m=class{constructor(){var e;this.screenWrapper=document.createElement("div"),this.screenWrapper.classList.add("themed-context-menu-container"),this.screenWrapper.classList.add("not-active"),this.screenWrapper.addEventListener("click",t=>this.onMouseClick(t)),(e=document.querySelector("atom-workspace"))==null||e.appendChild(this.screenWrapper)}createContextMenu(e,t){this.deleteContextMenu(),this.screenWrapper.classList.remove("not-active"),this.activeContextMenu=document.createElement("div"),this.activeContextMenu.classList.add("themed-context-menu");for(let n=0;n<t.length;n++)this.activeContextMenu.appendChild(i.createMenuItem(t[n],this).getElement());this.activeContextMenu.setAttribute("style","top:"+e.clientY+"px; left:"+(e.clientX+10)+"px"),this.screenWrapper.appendChild(this.activeContextMenu)}onMouseClick(e){e.stopPropagation(),this.deleteContextMenu()}deleteContextMenu(){this.activeContextMenu&&(this.activeContextMenu.remove(),this.screenWrapper.classList.add("not-active"))}};var g=new m;async function y(){console.log("hello!");let e=atom.contextMenu.itemSets.filter(n=>n.items.length>1)[0];document.querySelectorAll(e.selector).forEach(n=>L(n,e.items))}function k(){}function L(o,e){o.addEventListener("contextmenu",t=>{t.preventDefault(),t.stopPropagation(),console.log(e),g.createContextMenu(t,e)})}
//# sourceMappingURL=themed-context-menu.js.map
