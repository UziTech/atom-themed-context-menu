var c=Object.defineProperty;var h=a=>c(a,"__esModule",{value:!0});var p=(a,e)=>{for(var t in e)c(a,t,{get:e[t],enumerable:!0})};h(exports);p(exports,{activate:()=>M,deactivate:()=>v});var o=class{constructor(e,t,n){this.selected=!1;this.element=e,this.parent=t,this.height=n,this.element.addEventListener("click",i=>this.onMouseClick(i))}static createMenuItem(e,t){if(e.type==="separator")return new o(document.createElement("hr"),t,7);let n=document.createElement("div");n.classList.add("menu-item");let i=new o(n,t,23),m=document.createElement("span");m.classList.add("menu-item-name"),m.innerHTML=e.label?e.label:"";let s=document.createElement("span");if(s.classList.add("menu-item-key"),n.appendChild(m),n.appendChild(s),e.command!==void 0){i.command=e.command,i.commandDetail=e.commandDetail;let r=atom.keymaps.findKeyBindings({command:e.command});r.length>0&&(s.innerHTML=r[r.length-1].keystrokes)}return i}onMouseClick(e){e.stopPropagation(),this.execCommand(),this.parent.deleteContextMenu()}async execCommand(){var t;if(this.command===void 0)return;let e=((t=atom.workspace.getActiveTextEditor())==null?void 0:t.getElement())||atom.workspace.getActivePane().getElement();await atom.commands.dispatch(e,this.command,this.commandDetail)}getElement(){return this.element}getHeight(){return this.height}};var l=class{constructor(e,t,n,i){this.visible=!0;this.children=[];this.tcm=i,this.domElement=document.createElement("div"),this.domElement.classList.add("submenu"),n||(this.visible=!1,this.domElement.classList.add("invisible")),t.forEach(m=>{this.addChild(m)}),console.log(t),this.domElement.setAttribute("style",this.getPositionStyleString(e)),i.appendChild(this.domElement)}deleteContextMenu(){this.tcm.deleteContextMenu()}getPositionStyleString(e){let t=e.clientX+10+5,n=e.clientY+5;return t=Math.min(t,window.innerWidth-310),n=Math.min(n,window.innerHeight-this.getHeight()-10),"top:"+n+"px; left:"+t+"px"}addChild(e){let t=o.createMenuItem(e,this);this.children.push(t),this.domElement.appendChild(t.getElement())}getHeight(){return this.children.map(e=>e.getHeight()).reduce(function(e,t){return e+t})}removeAllChildNodes(){for(;this.domElement.firstChild;)this.domElement.removeChild(this.domElement.firstChild)}};var d=class{constructor(){this.container=document.createElement("div"),this.container.classList.add("themed-context-menu");let e=document.querySelector("atom-workspace");e==null||e.appendChild(this.container)}hijackFunction(){let e=atom.contextMenu;this.hijackedFunction=e.showForEvent,e.showForEvent=t=>{let n=e.templateForEvent(t);this.displayContextMenu(t,n)}}releaseFunction(){let e=atom.contextMenu;e.showForEvent=this.hijackedFunction}displayContextMenu(e,t){this.deleteContextMenu(),new l(e,t,!0,this)}appendChild(e){this.container.appendChild(e)}onMouseClick(e){this.deleteContextMenu()}deleteContextMenu(){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild)}};var u=new d;function M(){u.hijackFunction()}function v(){u.releaseFunction()}
//# sourceMappingURL=themed-context-menu.js.map
